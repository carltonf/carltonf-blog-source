<div class="collapse" id="sidebar">

<!-- TODO use meaningful content  -->
<div class="well">
  <div class="input-group">
    <input id="quick-search" type="text" class="form-control"
           placeholder="Quick Search..."/>
    <span class="input-group-btn" style="display: none">
      <button class="btn btn-default" type="button">
        <i class="glyphicon glyphicon-search"></i>
      </button>
    </span>
  </div>
  <!-- /input-group -->
</div>

<script>
 /* TODO too crude for the check on 'searchIndex' */
 if ( !searchIndex ){
   var searchIndex;
   $.getJSON('/search-index.json', function (data){
     searchIndex = data;

     $('#quick-search').autocomplete({
       lookup: searchIndex,

       /* TODO we've force the format of JSON, use 'transformResult' to undo that. */
       onSelect: function (suggestion) {
         console.log("Jump to: " + suggestion.data);
         window.location.href = suggestion.data;
       }
     });
   })
 }
</script>

<style>
 .autocomplete-suggestions { border: 1px solid #999; background: #FFF; overflow: auto; font-size: 80%; }
 .autocomplete-suggestion { padding: 2px 5px; border-bottom: 1px; border-bottom-style: dashed; border-bottom-color: grey; }
 .autocomplete-selected { background: #F0F0F0; }
 .autocomplete-suggestions strong { font-weight: bold; color: #3399FF; }
 .autocomplete-group { padding: 2px 5px; }
 .autocomplete-group strong { display: block; border-bottom: 1px solid #000; }
</style>

<!-- /well -->
<div class="well">
  <h4><i class="glyphicon glyphicon-tag"></i> Popular Tags:</h4>
  <!-- TAG links are harder than thought due to the nature of static pages
  see https://github.com/danielsiwiec/leanoverboard.com/commit/cf04dd322f5ffe2251ca6e3733d2707c2eaec7d4
  for a JS solution.
  Solutions:
  - Statically generate all tag pages
  - Use JS with a tag-pages-index.json (like in search)
  -->
  {% for tag in site.tags %}
  <span class="tag-badge">
    <a href="#">
      <!-- trick to create tag cloud
      see http://vvv.tobiassjosten.net/jekyll/jekyll-tag-cloud/ -->
      <span class="badge tag-text" style="font-size: {{ tag | last | size | times: 100 | divided_by: site.tags.size | plus: 7 }}px">
      {{ tag | first }}
      </span>
    </a>
  </span>
  {% endfor %}
</div>
<!-- /well -->

<div class="well">
  <h4><i class="glyphicon glyphicon-time"></i> Recent Posts:</h4>
  <ul>
    {% for post in site.posts limit:10 %}
    <li><a href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a></li>
    {% endfor %}
  </ul>
</div>

<div class="well" style="display: none;">
  <h4><i class="glyphicon glyphicon-star"></i> Popular Posts:</h4>
  <ul>
  </ul>
</div>

</div>
