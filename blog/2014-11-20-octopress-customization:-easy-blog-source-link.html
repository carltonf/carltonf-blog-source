
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Octopress Customization: Easy Blog Source Link - Crystal Sight</title>
  <meta name="author" content="Carl Xiong">

  
  <meta name="description" content="Summary Most my posts here are programming-related and one of Org's killer features is
embedding code (used in literate programming and etc.), I &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://carltonf.github.io/blog/2014-11-20-octopress-customization:-easy-blog-source-link.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Crystal Sight" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Crystal Sight</a></h1>
  
    <h2>See further, but how far is far?</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:carltonf.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Octopress Customization: Easy Blog Source Link</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-11-20'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://carltonf.github.io">Comments</a>
        
        |
        
        <a href="/blog/2014-11-20-octopress-customization:-easy-blog-source-link.org">SOURCE</a>
        

      </p>
    
  </header>


<div class="entry-content"><p>

</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Summary</h2>
<div class="outline-text-2" id="text-1">
<p>
Most my posts here are programming-related and one of <code>Org</code>&#8217;s killer features is
embedding code (used in literate programming and etc.), I thought why not give
the reader an easier way to access my post source. Chances are that they might
be using <code>Emacs</code> and <code>Org</code>, then they can try the code directly without
copying/pasting or the hassle to wade through my source repo ;).
</p>

<p>
It turns out to be quite easy to do this, as shown in the red rectangle below:
<img src="/blog/2014-11-20-octopress-customization:-easy-blog-source-link/2014-11-20-223301_856x329_scrot.png" alt="2014-11-20-223301_856x329_scrot.png" />
</p>

<p>
<!-- more -->
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Code and References</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">Two key references:</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li><a href="http://jekyllrb.com/docs/variables/">Jekyll Variables</a>: simply put, just various blog/post/page information
available to you when you are hacking.
</li>
<li><a href="http://jekyllrb.com/docs/templates/">Jekyll Templates</a> and <a href="https://github.com/Shopify/liquid/wiki/Liquid-for-Designers">Liquid Filters&amp;Tags</a>: again simply, various predefined
methods or programming structure you can use to manipulate the data you
extract from above. The <code>Liquid</code> document is more useful.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">Code</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Here is the whole commit:
</p>
<div class="org-src-container">

<pre class="src src-diff"><span class="linenr"> 1: </span><span style="color: #93a1a1;">diff --git a/source/_includes/article.html b/source/_includes/article.html</span>
<span class="linenr"> 2: </span><span style="color: #93a1a1;">index 8427997..c38fd90 100644</span>
<span class="linenr"> 3: </span><span style="color: #586e75; background-color: #fdf6e3;">--- </span><span style="color: #586e75; background-color: #fdf6e3;">a/source/_includes/article.html</span>
<span class="linenr"> 4: </span><span style="color: #586e75; background-color: #fdf6e3;">+++ </span><span style="color: #586e75; background-color: #fdf6e3;">b/source/_includes/article.html</span>
<span class="linenr"> 5: </span><span style="color: #586e75; background-color: #fdf6e3;">@@ -12,6 +12,14 @@</span>
<span class="linenr"> 6: </span><span style="color: #93a1a1;">            | &lt;a href="{% if index %}{{ root_url }}{{ post.url }}{% endif %}#disqus_thread"</span>
<span class="linenr"> 7: </span><span style="color: #93a1a1;">              data-disqus-identifier="{% if post.meta.disqus_id %}{{ post.meta.disqus_id }}{% else %}{{ site.url }}{{ post.url }}{% endif %}"&gt;Comments&lt;/a&gt;</span>
<span class="linenr"> 8: </span><span style="color: #93a1a1;">         {% endif %}</span>
<span class="linenr"> 9: </span><span style="color: #859900; font-weight: bold;">+</span><span style="color: #859900; font-weight: bold;">        |</span>
<span id="coderef-is-home" class="coderef-off"><span class="linenr">10: </span><span style="color: #859900; font-weight: bold;">+</span><span style="color: #859900; font-weight: bold;">        {% if index %}</span></span>
<span class="linenr">11: </span><span style="color: #859900; font-weight: bold;">+</span><span style="color: #859900; font-weight: bold;">        {% capture abs_page_url %}{{ root_url }}{{ post.url }}{% endcapture %}</span>
<span class="linenr">12: </span><span style="color: #859900; font-weight: bold;">+</span><span style="color: #859900; font-weight: bold;">        &lt;a href="{{ abs_page_url | split:'.html' | first | append:'.org' }}"&gt;SOURCE&lt;/a&gt;</span>
<span class="linenr">13: </span><span style="color: #859900; font-weight: bold;">+</span><span style="color: #859900; font-weight: bold;">        {% else %}</span>
<span id="coderef-html-to-org" class="coderef-off"><span class="linenr">14: </span><span style="color: #859900; font-weight: bold;">+</span><span style="color: #859900; font-weight: bold;">        &lt;a href="{{ page.url | split:'.html' | first | append:'.org' }}"&gt;SOURCE&lt;/a&gt;</span></span>
<span class="linenr">15: </span><span style="color: #859900; font-weight: bold;">+</span><span style="color: #859900; font-weight: bold;">        {% endif %}</span>
<span class="linenr">16: </span><span style="color: #859900; font-weight: bold;">+</span>
<span class="linenr">17: </span><span style="color: #93a1a1;">       &lt;/p&gt;</span>
<span class="linenr">18: </span><span style="color: #93a1a1;">     {% endunless %}</span>
<span class="linenr">19: </span><span style="color: #93a1a1;">   &lt;/header&gt;</span>
</pre>
</div>

<p>
<b>Explanations:</b>
</p>
<ul class="org-ul">
<li>Line <a href="#coderef-is-home"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-is-home');" onmouseout="CodeHighlightOff(this, 'coderef-is-home');">10</a> checks whether the current html snippet is in Home page or not.
If the post is in Home, links in the articles are updated to absolute path
(versus the site), otherwise relative paths are used.
</li>
<li>Line <a href="#coderef-html-to-org"class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-html-to-org');" onmouseout="CodeHighlightOff(this, 'coderef-html-to-org');">14</a> uses 3 filters to replace <code>.html</code> with <code>.org</code>. I have my
source synced to the <code>_deploy/blog</code> so here changing the extension is enough.
I didn&#8217;t find a better way to do this simple replacement :(.
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Afternote</h2>
<div class="outline-text-2" id="text-3">
<p>
While I still like this idea of sharing blog source more easily, its usability
might not always be so good as I thought. As in this post, I&#8217;ve used some <code>Org</code>
link reference to make explanation clearer, which is nice for a post but at the
same time make it inconvenient to use the code directly.
</p>

<p>

</p>
</div>
</div>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Carl Xiong</span></span>

      




<time class='entry-date' datetime='2014-11-20'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:00 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/jekyll/'>jekyll</a>, <a class='category' href='/blog/categories/octopress/'>octopress</a>, <a class='category' href='/blog/categories/org/'>org</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014-11-19-org-octopress:-links.html" title="Previous Post: Org-octopress: Links">&laquo; Org-octopress: Links</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014-11-20-octopress-customization:-easy-blog-source-link.html">Octopress Customization: Easy Blog Source Link</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014-11-19-org-octopress:-links.html">Org-octopress: Links</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014-11-19-hello-and-self-introduction.html">Hello and Self-Introduction</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/carltonf">@carltonf</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'carltonf',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




<section>
  <h1>Category Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/emacs' style='font-size: 130.0%; margin: 1%'>emacs</a> <a href='/blog/categories/emacs-lisp' style='font-size: 130.0%; margin: 1%'>emacs-lisp</a> <a href='/blog/categories/jekyll' style='font-size: 130.0%; margin: 1%'>jekyll</a> <a href='/blog/categories/octopress' style='font-size: 160.0%; margin: 1%'>octopress</a> <a href='/blog/categories/org' style='font-size: 160.0%; margin: 1%'>org</a> </span>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Carl Xiong -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'carltonf';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://carltonf.github.io/blog/2014-11-20-octopress-customization:-easy-blog-source-link.html';
        var disqus_url = 'http://carltonf.github.io/blog/2014-11-20-octopress-customization:-easy-blog-source-link.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
